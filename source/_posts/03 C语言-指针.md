---
title: 03 C语言-指针
date: 2020-09-20 02:16:23.0
updated: 2021-11-09 03:52:43.181
url: /?p=4
categories: 
- C 语言
tags: 
- 指针
---

指针是C语言的灵魂

## 什么是指针?

变量的地址就是指针

## 指针变量

### 1. 不管是个什么东西,首先他是一个变量.

指针变量就是专门用来存储地址的变量, 专门用来存储另一个变量地址的.

那么我们就说,这个指针变量指向另外一个变量

### 2. 这么做的好处

访问一个变量的方式有两种:

1) 直接访问

```c
int num = 10;
num = 20;   // 直接访问这个num变量,并重新赋值
```

2) 间接访问

```c
// 可以通过指针变量找到这个指针变量指向的变量
// 通过指针变量就可以间接地访问这个指向的变量
```

### 3. 如何声明一个专门用来存储地址的指针变量呢?

1) 我们之前学习的普通变量声明方式

```c
// 数据类型 变量名;
int num;
```

2) 声明指针变量的语法

```c
// 数据类型* 指针变量名称;
int* p1;
// 代表声明了一个指针变量, 这个指针变量的名字叫做p1. 
// 这个指针变量的类型是 int* 读作int指针
// 这个*代表这个变量不是一个普通变量,而是一个用来存储地址的指针变量
// 这个p1指针变量中只能存储地址
int* p1;
double* p2;
float* p3;
char* p4;
// 指针的类型: 有哪些普通的类型就可以有哪些指针的类型
```

3) 指针变量是用来存储另一个变量的地址的

​	但是一个指针变量并不是刻意存储任意类型的变量地址的. 而是有限定的

```c
// 只能存储和这个指针类型相同的 普通变量的地址
int *p1;  // 变量中只能存储int变量的地址
double *p2;   // 变量中只能存储double类型的变量地址
// 否则会发生无法估计的错误
```

### 4. 指针变量的初始化

1) 指针变量是用来存储另外一个变量的地址的

​	–> 所以,我们不能直接复制 一个非地址的常量数据

​	–> 所以我们也不能直接赋值一个变量给指针

2) 指针是用来存储另一个变量的的地址. 并且指针可以存储的另一个变量的地址 这个变量的类型是限定的

3) 正确的初始化步骤

```c
// 先取出变量的地址 &变量名
// 然后赋值给指针变量
int num = 10;
int *p1 = &num;
// 这时候p1的值就是num的地址, 我们就说p1指针指向了num这个变量
```

### 5. 指针变量的使用

1) 指针变量中存储的是另一个变量的地址

​	这么做的好处: 在于可以使用指针间接地操作指针指向的变量

2) Pointer. 建议声明指针变量的时候以p开头

3)  使用指针间接地操作指针指向的变量

```c
// 格式: *指针变量名;  代表这个指针指向的变量
int num = 10;
int *p1 = &num;
*p1 = 100;
// *p1等价于num
```

4) 野指针

​	我们声明一个指针变量,如果没有为其初始化,那么这个指针变量中是有值的, 垃圾值,随机数

​	这个时候,这个指针指向的激素hi一块随机空间.

​	这块空间:	可能无人使用	也有可能别的程序正在使用	也有可能系统在使用

​	这样的指针我们将其叫做野指针

5) NULL值

​	我们声明一个指针,如果不初始化这个指针, 这个指针就是一个野指针, 就指向了一块随机空间,那么这个时候 如果你通过	这个指针访问指针指向的随机空的时候 是相当危险的.

​	如果是取值也就罢了,如果是进行赋值,就有可能造成某系程序崩溃

​	所以尽量在声明指针的时候进行初始化,如果暂时没有变量地址,可以将其初始化为NULL., NULL等价于0

## 指针为什么要分类型

1. 指针分为很多类型

   ```c
   int*;
   double*;
   float*;
   char*;
   /*
   指针变量是一个变量, 既然是一个变量,那么就在内存中战友字节数
   但是 无论什么类型的指针,在内存中都只占8个字节
   既然如此,那么为什么指针还要分类型呢?
   */    
   ```

2. 通过指针间接地操作指针指向白能量的方式

## 多级指针

1. 一级指针

   一个指针变量中存储的是一个普通变量的地址, 这样的指针,我们称之为一级指针

   二级指针

   ![Snipaste_2021-09-03_14-58-09](https://i.loli.net/2021/09/18/1bisPQ9wk4DlKx3.png)

   三级指针

   …

2. 二级指针

   1) 只能存储一级指针变量的地址,这样的指针叫做二级指针

   2) 声明二级指针的语法

   ​	a. 声明一级指针: 数据类型 *指针名;

   ​	b. 声明二级指针: 数据类型 **指针名;

   ​	c. 声明三级指针: 数据类型 ***指针名;

   ```c
   int num = 10;
   int *p1 = &num;
   int **p2 = &p1;
   int ***p3 = &p2;
   // 一级指针只能存储普通变量的地址
   // 二级指针只能存储一级指针变量的地址
   // 三级指针只能存储二级指针变量的地址
   // n级指针只能存储n-1级指针变量的地址
   ```

## 指针与整数的加减运算

1. 指针可以和整数进行加减运算

   指针与整数进行加减运算

   比如指针 + 1;

   并不是在指针地址的基础上加上一个字节的地址, 而是在这个指针地址的基础上加上一个单位变量占用的字节数

   如果指针的类型是 int* 	那么这个时候1 表示4个字节地址

   如果指针的类型是 float* 	那么这个时候1 表示4个字节地址

   如果指针的类型是 double* 	那么这个时候1 表示8个字节地址

## 使用指针遍历数组

1. 使用指针遍历数组的第一种方式

```c
int arr[3] = {1,2,3};
int *p1 = arr; //p1指针指向的是数组第0个元素
for(int i=0;i<3;++i){
    printf("%d\n",*(p1+i));
}
```

2. 使用指针遍历数组的第二种方式

   ```c
   int arr[3] = {1,2,3};
   for(int i=0;i<3;++i){
       printf("%d\n",*(arr+i));
   }
   ```

3. 使用指针遍历数组的第三种方式

   ```c
   int arr[3] = {1,2,3};
   for(int i=0;i<3;++i){
       printf("%d\n",*(p1++));
   }
   ```

## 索引的本质

1. 指针变量后面可以使用中括弧,在中括弧中写下标可以访问数据

2. p1[n]; 前提是p1是一个指针变量

   完全等价于 *(p1+n);

3. 只要是指针都可以使用中括弧下标,相当于去访问指针指向的变量

   操作数组我们虽然使用的总括弧下标来操作,实际上内部仍然使用的是指针来操作

4. 重点

   ```c
   ```

   

# 注: 

> 数组的内存地址 = 数组第0个元素的内存地址
>
> 所以
>
> ```c
> int arr[3] = {1,2,3};
> int *p1 = &arr[0];
> int *p2 = arr;
> // *p1 和 *p2是完全等价的
> ```
>
>